

CREATE TABLE "SYSTEM"."QUERY_HISTORY"
(	"ID" NUMBER NOT NULL ENABLE,
     "USERS_ID" NUMBER NOT NULL ENABLE,
     "TASKS_ID" NUMBER NOT NULL ENABLE,
     "RESULT" NUMBER NOT NULL ENABLE,
     "SQL" VARCHAR2(20 BYTE) NOT NULL ENABLE,
     "COST" NUMBER NOT NULL ENABLE,
     "TIME" DATE NOT NULL ENABLE,
     CONSTRAINT "QUERY_HISTORY_PK" PRIMARY KEY ("ID")
         USING INDEX PCTFREE 10 INITRANS 2 MAXTRANS 255 COMPUTE STATISTICS
         STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
         PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
         BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
         TABLESPACE "SYSTEM"  ENABLE
) PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255
 NOCOMPRESS LOGGING
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE "SYSTEM" ;

COMMENT ON COLUMN "SYSTEM"."QUERY_HISTORY"."RESULT" IS '0 - FALSE
1 - TRUE';


CREATE TABLE tasks
(
    id NUMBER (19)  NOT NULL ,
    reference_query VARCHAR2 (1000)  NOT NULL ,
    title VARCHAR2 (100)  NOT NULL ,
    serial_numbe NUMBER  NOT NULL ,
    description VARCHAR2 (2000)
)
;



ALTER TABLE tasks
    ADD CONSTRAINT tasks_PK PRIMARY KEY ( id ) ;


CREATE TABLE tasks_users
(
    tasks_id NUMBER (19)  NOT NULL ,
    users_id NUMBER (19)  NOT NULL ,
    status VARCHAR2 (100)
)
;



ALTER TABLE tasks_users
    ADD CONSTRAINT tasks_users__IDX PRIMARY KEY ( tasks_id, users_id ) ;


CREATE TABLE users
(
    id NUMBER (19)  NOT NULL ,
    email VARCHAR2 (100)  NOT NULL
)
;



ALTER TABLE users
    ADD CONSTRAINT users_PK PRIMARY KEY ( id ) ;



ALTER TABLE tasks_users
    ADD CONSTRAINT FK_ASS_1 FOREIGN KEY
        (
         tasks_id
            )
        REFERENCES tasks
            (
             id
                )
        ON DELETE CASCADE
;


ALTER TABLE tasks_users
    ADD CONSTRAINT FK_ASS_2 FOREIGN KEY
        (
         users_id
            )
        REFERENCES users
            (
             id
                )
        ON DELETE CASCADE
;


CREATE TABLE QUERY_HISTORY
(
    ID NUMBER NOT NULL
    , USERS_ID NUMBER NOT NULL
    , TASKS_ID NUMBER NOT NULL
    , RESUIL NUMBER NOT NULL
    , SQL VARCHAR2(20) NOT NULL
    , COST NUMBER NOT NULL
    , CONSTRAINT QUERY_HISTORY_PK PRIMARY KEY
    (
     ID
        )
    ENABLE
);

COMMENT ON COLUMN QUERY_HISTORY.RESUIL IS '0 - FALSE
1 - TRUE';